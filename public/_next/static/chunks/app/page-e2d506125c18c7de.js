(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7341:function(e,s,n){Promise.resolve().then(n.bind(n,5524))},2938:function(){},1723:function(){},3796:function(){},5524:function(e,s,n){"use strict";let t;n.r(s),n.d(s,{default:function(){return O}});var o=n(7437);n(703);var l=n(828),a=n(2265),i=n(8209),r=n(4725),c=n(6123);n(8062);var d=()=>{let e=(0,l.I0)();return(0,a.useEffect)(()=>((t=(0,i.ZP)("wss://monitoring.qpart.com.ua:5000",{transport:["websocket"],extraHeaders:{type:"webclient"}})).on("connect",()=>{console.log("Connected to WebSocket server")}),t.on("message",e=>{}),t.on("info",e=>{console.log("soketon info",e)}),t.on("webclient",s=>{console.log("Received message:",s),"info"===s.topic&&e((0,r.e)(s.payload)),"result"===s.topic&&console.log("result",s.result)}),t.on("error",e=>{console.error("WebSocket connection error:",e),console.error("WebSocket connection error:",e.code)}),t.on("connect_error",e=>{console.error("Connect_error:",e.type,e),console.error("Connect_error:",e.type,e.code),console.error("Connect_error:",e.type,e.message)}),()=>{t.disconnect()}),[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(c.Ix,{})})};let m=e=>{let{inputText:s,deviceId:n}=e;console.log("sendDataToServer"),console.log(s),console.log(n);let o={topic:"command",payload:s,id:n};console.log(o),t&&t.connected?(t.emit("command",o),console.log("повідомлення відправлено")):console.error("Socket is not connected")};n(1068);var x=n(2098);n(1723);var u=e=>{let{usedSpace:s,totalSpace:n,availableSpace:t}=e,l=0===n?1:Math.round(n),a="".concat(t," ГБ вільно з ").concat(l," ГБ");return(0,o.jsxs)("div",{className:"progress-container",children:[(0,o.jsx)(x.Z,{now:Math.round(s),max:l,className:"bg-secondary ",style:{color:"grey",height:"15px"}}),(0,o.jsx)("span",{className:"progress-label ",children:a})]})};n(197);var h=e=>{let{online:s,timeLastInfo:n,uptime:t}=e;return(0,o.jsx)("div",{children:s?(0,o.jsxs)("span",{style:{color:"black"},children:["Онлайн. Працює вже ",t]}):(0,o.jsxs)("span",{style:{color:"grey"},children:["Офлайн. Останній раз в мережі ",(e=>{let s=new Date(e),n=("0"+s.getDate()).slice(-2),t=("0"+(s.getMonth()+1)).slice(-2),o=("0"+s.getHours()).slice(-2),l=("0"+s.getMinutes()).slice(-2);return"".concat(n,".").concat(t," ").concat(o,":").concat(l)})(n)]})})};n(2938);var j=n(6550),v=n(7057),p=n(7535),g=n(8024),N=function(e){let{show:s,onHide:n,onConfirm:t}=e;return(0,o.jsxs)(v.Z,{show:s,onHide:n,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"modal-fullscreen-sm-down",children:[(0,o.jsx)(v.Z.Header,{closeButton:!0,children:(0,o.jsx)(v.Z.Title,{children:"Підтвердження операції"})}),(0,o.jsxs)(v.Z.Footer,{children:[(0,o.jsx)(j.Z,{variant:"secondary",onClick:n,children:"Скасувати"}),(0,o.jsx)(j.Z,{variant:"primary",onClick:t,children:"Підтвердити"})]})]})},b=e=>{let{deviceId:s,show:n,onHide:t,device:l}=e,[i,r]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),x=e=>{r(!0),d(e)},u=e=>{let{name:s,command:n,svg:t}=e;return(0,o.jsxs)("div",{className:"menu-button",onClick:()=>{x(n)},children:[(0,o.jsxs)(j.Z,{variant:"",className:"button-off btn-dark",children:[(0,o.jsx)("div",{className:"btn-text",children:s}),(0,o.jsx)("div",{className:"btn-svg",children:t})]})," "]})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(v.Z,{show:n,onHide:t,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,o.jsx)(v.Z.Header,{closeButton:!0,children:(0,o.jsxs)(v.Z.Title,{id:"contained-modal-title-vcenter",children:["Компьютер ",l.name]})}),(0,o.jsxs)(v.Z.Body,{className:"d-flex justify-content-evenly align-items-center flex-row",children:[(0,o.jsx)(u,{name:"вимкнути",svg:(0,o.jsx)(g.G,{icon:p.oTz,className:".btn-svg"}),command:"shutdown /s /t 0"}),(0,o.jsx)(u,{name:"перезавантажити",command:"shutdown /r /t 0",svg:(0,o.jsx)(g.G,{icon:p.XnX,className:".btn-svg"})})]})]}),(0,o.jsx)(N,{show:i,onHide:()=>r(!1),onConfirm:()=>{console.log("sendDataToServer from deviceMenu"),r(!1),t(),m({inputText:c,deviceId:s})}})]})},f=n(2717),k=e=>{let{buttonText:s,handleOnClick:n,disabled:t}=e;return(0,o.jsx)(j.Z,{className:"btn w-100 mb-2 btn-lg btn-dark disk-button",style:{fontSize:"20px",width:"100%",height:"50px"},disabled:t,onClick:n,children:s})},y=n(3999),w=e=>{let{type:s,value:n,onChange:t,isPasswordValid:l,placeholderText:i,errorMessage:r}=e,[c,d]=(0,a.useState)(!1);return(0,o.jsxs)(y.Z,{className:"mb-2",children:[(0,o.jsx)(f.Z.Control,{className:"form-control-lg disk-input ".concat(l?"is-valid":!1===l?"is-invalid":""),type:c?"text":"password",value:n,onChange:t,placeholder:i||"введіть пароль (не менше 8 символів)",autoComplete:"off",isValid:!0===l,isInvalid:!1===l}),(0,o.jsx)("span",{className:"input-group-text",onClick:()=>d(!c),children:(0,o.jsx)(g.G,{icon:c?p.Mdf:p.Aq,className:"fa-lg"})}),r&&(0,o.jsx)(f.Z.Control.Feedback,{type:"invalid",children:r})]})},S=e=>{let{deviceId:s,diskName:n,onHidePrevious:t}=e,[l,i]=(0,a.useState)(""),[r,c]=(0,a.useState)(!1),d=l.length>=8||!(l.length>0)&&"",x='Unlock-BitLocker -MountPoint "'.concat(n,'" -Password (ConvertTo-SecureString -String "').concat(l,'" -AsPlainText -Force)'),u=()=>{m({inputText:x,deviceId:s}),c(!1),t()};return(0,o.jsxs)("div",{className:"",children:[(0,o.jsxs)(f.Z.Group,{className:"mb-2",children:[(0,o.jsx)(w,{value:l,onChange:e=>i(e.target.value),isPasswordValid:d}),(0,o.jsx)(k,{buttonText:"Розблокувати диск",disabled:!d,handleOnClick:e=>{c(!0)}})]}),(0,o.jsx)(N,{show:r,onHide:()=>c(!1),onConfirm:()=>u()})]})},C=e=>{let{deviceId:s,diskName:n,onHidePrevious:t}=e,[l,i]=(0,a.useState)(!1),r='Disable-BitLocker -MountPoint "'.concat(n,'"'),c=()=>{m({inputText:r,deviceId:s}),i(!1),t()};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k,{buttonText:"Вимкнути шифрування",disabled:!1,handleOnClick:e=>{i(!0)}}),(0,o.jsx)(N,{show:l,onHide:()=>i(!1),onConfirm:()=>c()})]})},Z=e=>{let{deviceId:s,diskName:n,onHidePrevious:t}=e,[l,i]=(0,a.useState)("text"),[r,c]=(0,a.useState)(""),[d,x]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),j=r.length>=8||!(r.length>0)&&"",v=""===d?"":d===r,p='Enable-BitLocker -MountPoint "'.concat(n,'" -PasswordProtector -Password (ConvertTo-SecureString -String "').concat(r,'" -AsPlainText -Force) -UsedSpaceOnly -SkipHardwareTest'),g=()=>{m({inputText:p,deviceId:s}),h(!1),t()};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(f.Z.Group,{children:[(0,o.jsx)(w,{value:r,onChange:e=>c(e.target.value),isPasswordValid:j}),(0,o.jsx)(w,{value:d,isPasswordValid:v,onChange:e=>x(e.target.value),placeholderText:"повторіть пароль",errorMessage:v?"":"Паролі не співпадають"}),(0,o.jsx)(k,{buttonText:"Активувати шифрування",disabled:!j||!v,handleOnClick:e=>{h(!0)}})]}),(0,o.jsx)(N,{show:u,onHide:()=>h(!1),onConfirm:()=>g()})]})},H=e=>{let{diskName:s,deviceId:n,show:t,onHide:i,device:r,setModalShow:c,onHidePrevious:d}=e,[x,u]=(0,a.useState)(!1),[h,j]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),b=e=>{console.log("handleConfirm in diskMenu"),console.log(p),m({inputText:p,deviceId:n}),u(!1),d()},f=(0,l.v9)(e=>e.devices).find(e=>e.id===n).disk.find(e=>e.mounted===s);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(v.Z,{show:t,onHide:i,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"modal-fullscreen-sm-down",children:[(0,o.jsx)(v.Z.Header,{closeButton:!0,children:(0,o.jsxs)(v.Z.Title,{id:"contained-modal-title-vcenter",children:["Диск ",s," Компьютер ",r.name]})}),(0,o.jsx)(v.Z.Body,{children:f.locked?(0,o.jsx)(S,{deviceId:n,onHidePrevious:d}):f.crypt?(0,o.jsx)(C,{deviceId:n,onHidePrevious:d,diskName:s}):(0,o.jsx)(Z,{deviceId:n,onHidePrevious:d,diskName:s})})]}),(0,o.jsx)(N,{show:x,onHide:()=>u(!1),onConfirm:()=>b()})]})},P=n(6128),T=e=>{let{deviceId:s,diskName:n,device:t,diskCrypt:l}=e,[i,r]=a.useState(!1);return(0,o.jsxs)("div",{className:"disk-menu-item",children:[(0,o.jsx)("div",{onClick:()=>{t.online&&r(!0)},children:(0,o.jsx)(P.zPD,{className:"display-6"})}),(0,o.jsx)(H,{device:t,deviceId:s,diskName:n,show:i,onHidePrevious:()=>{r(!1)},setModalShow:r,onHide:()=>r(!1)})]})},I=n(7252),M=n(1399),F=n(477),B=function(e){let{size:s}=e;return(0,o.jsx)(F.Z,{animation:"border",role:"status",variant:"primary",size:s,children:(0,o.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},_=e=>{let{deviceName:s,ip:n,discs:t,deviceId:l,device:i}=e,[r,c]=a.useState(!1);return(0,o.jsxs)("div",{className:"position-relative container mb-4 border rounded p-3 pb-2 bg-dark-subtle align-items-center shadow",style:{border:"2px solid red"},children:[(0,o.jsx)(b,{deviceId:i.id,device:i,show:r,onHide:()=>c(!1)}),(0,o.jsxs)("div",{className:"row align-items-center",children:[(0,o.jsx)("div",{className:"col-10",children:(0,o.jsxs)("h3",{className:"h4 mb-2 align-item-center ",children:[i.online?(0,o.jsx)(I.Zh5,{style:{color:"green",margin:"0 0 3px 0"}}):(0,o.jsx)(I.Zh5,{style:{color:"grey",margin:"0 0 3px 0"}}),"  ",i.online?(0,o.jsx)(o.Fragment,{children:s}):(0,o.jsx)("span",{style:{color:"grey"},children:s})]})}),(0,o.jsx)("div",{className:"col-2 text-end",children:(0,o.jsx)(P.qTj,{className:"display-4",onClick:()=>{i.online&&(c(!0),console.log(r))}})})]}),(0,o.jsx)("div",{className:"row align-items-center p-2",children:(0,o.jsx)("div",{className:"col-12",children:(0,o.jsx)("span",{className:"mb-2 h-6 text-start",children:(0,o.jsx)(h,{online:i.online,timeLastInfo:i.timeLastInfo,uptime:i.uptime})})})}),(0,o.jsx)("p",{className:"mb-1",children:n}),(0,o.jsxs)("div",{className:"list-group",children:[t.map((e,s)=>(0,o.jsxs)("div",{className:"list-group-item mb-2 rounded",style:{background:"#dde2e7"},children:[(0,o.jsxs)("div",{className:"row mb-2 align-items-center p-2",children:[(0,o.jsx)("div",{className:"col-3 p-0 ",children:(0,o.jsxs)("span",{className:"h4",children:["Диск ",e.mounted]})}),(0,o.jsx)("div",{className:"col-6 text-start p-0",children:(0,o.jsx)("span",{className:"",children:(0,o.jsxs)("span",{className:e.crypt?"text-dark":"text-success",children:[e.crypt?"зашифровано ":"не зашифровано ",(0,o.jsx)("span",{className:"m-1"}),(e.crypt,""),e.crypt?(0,o.jsxs)(o.Fragment,{children:[" ",e.locked?(0,o.jsx)(M.kUi,{className:"text-danger"}):(0,o.jsx)(M.D5B,{className:"text-success"})," "]}):" "]})})}),(0,o.jsx)("div",{className:"col-2 text-start p-0"}),(0,o.jsx)("div",{className:"col-1 text-end p-0",children:(0,o.jsx)(T,{deviceId:l,diskName:e.mounted,device:i,diskCrypt:e.crypt},s)})]}),(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("span",{className:"mb-2 p-2",children:(0,o.jsx)(u,{usedSpace:e.used,availableSpace:e.available,totalSpace:e.total})})})]},s)),(0,o.jsx)("div",{className:"containter rounded"})]})]})};function z(e){let{show:s}=e;return s?(0,o.jsxs)("div",{className:"loader-container",children:[(0,o.jsx)("div",{style:{marginBottom:"50px"},children:"Очікуємо на зв'язок з сервером"}),(0,o.jsx)(B,{size:"lg"})]}):null}n(3796);var D=()=>{let[e,s]=(0,a.useState)(!1),n=()=>{s(!0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.Z,{variant:"danger",size:"lg",onClick:n,className:"mb-4 d-flex flex-column align-items-center",onClick:n,children:[(0,o.jsx)("span",{className:"mb-2",children:"Вимкнути всі пристрої"}),(0,o.jsx)(g.G,{icon:p.oTz,className:"mb-2",style:{fontSize:"80px"}})]}),(0,o.jsx)(N,{show:e,onHide:()=>s(!1),onConfirm:()=>{s(!1),console.log("вимкнути всі компьютери")}})]})};function O(){let e=(0,l.v9)(e=>e.devices),[s,n]=(0,a.useState)("");return(0,o.jsxs)("main",{className:"container mx-auto py-4",style:{maxWidth:"576px",minWidth:"320px"},children:[(0,o.jsx)(d,{}),(0,o.jsx)(z,{show:0===e.length}),(0,o.jsxs)("div",{className:"list-group",children:[(0,o.jsx)(D,{}),e.map(e=>(0,o.jsx)(_,{deviceName:e.name,ip:e.ip,discs:e.disk,deviceId:e.id,device:e},e.id))]})]})}},4725:function(e,s,n){"use strict";n.d(s,{e:function(){return o}});let t=(0,n(5972).oM)({name:"devices",initialState:[],reducers:{addOrUpdateDevice(e,s){let n=s.payload,t=e.findIndex(e=>e.id===n.id);return -1!==t?(console.log("Update device in store"),console.log(n.id),e.map((e,s)=>s===t?n:e)):(console.log("Add device in store"),[...e,n])}}}),{addOrUpdateDevice:o}=t.actions;s.Z=t.reducer}},function(e){e.O(0,[305,699,259,674,676,271,181,810,971,69,744],function(){return e(e.s=7341)}),_N_E=e.O()}]);